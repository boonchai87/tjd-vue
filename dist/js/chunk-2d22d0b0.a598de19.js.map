{"version":3,"sources":["webpack:///./src/views/movieList.vue?bb97","webpack:///src/views/movieList.vue","webpack:///./src/views/movieList.vue?f969","webpack:///./src/views/movieList.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","on","$event","gotoPage","_v","_m","_l","p","key","id","_s","name","released_on","edit","deleteObject","page","fetchData","_e","pages","slice","pageNumber","length","staticRenderFns","data","methods","computed","created","component"],"mappings":"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","file":"js/chunk-2d22d0b0.a598de19.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('button',{staticClass:\"btn btn-primary\",attrs:{\"type\":\"button\"},on:{\"click\":function($event){return _vm.gotoPage('movieEdit')}}},[_vm._v(\"เพิ่มรายการ\")]),_c('table',{staticClass:\"table table-bordered\"},[_vm._m(0),_c('tbody',_vm._l((_vm.rows),function(p){return _c('tr',{key:p.id},[_c('td',[_vm._v(_vm._s(p.name))]),_c('td',[_vm._v(_vm._s(p.released_on))]),_c('td',[_c('input',{staticClass:\"btn btn-secondary\",attrs:{\"type\":\"button\",\"value\":\"แก้ไข\"},on:{\"click\":function($event){return _vm.edit(p.id)}}}),_c('input',{staticClass:\"btn btn-danger\",attrs:{\"type\":\"button\",\"value\":\"ลบ\"},on:{\"click\":function($event){return _vm.deleteObject(p.id)}}})])])}),0)]),_c('nav',{attrs:{\"aria-label\":\"Page navigation example\"}},[_c('ul',{staticClass:\"pagination justify-content-center\"},[_c('li',{staticClass:\"page-item\"},[(_vm.page != 1)?_c('a',{staticClass:\"page-link\",attrs:{\"tabindex\":\"-1\",\"aria-disabled\":\"true\"},on:{\"click\":function($event){return _vm.fetchData(_vm.page-1)}}},[_vm._v(\"Previous\")]):_vm._e()]),_vm._l((_vm.pages.slice(_vm.page-1, _vm.page+5)),function(pageNumber){return [_c('li',{key:pageNumber,staticClass:\"page-item\"},[_c('a',{staticClass:\"page-link\",on:{\"click\":function($event){return _vm.fetchData(pageNumber)}}},[_vm._v(_vm._s(pageNumber))])])]}),(_vm.page < _vm.pages.length)?_c('li',{staticClass:\"page-item\"},[_c('a',{staticClass:\"page-link\",on:{\"click\":function($event){return _vm.fetchData(_vm.page+1)}}},[_vm._v(\"Next\")])]):_vm._e()],2)])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('thead',[_c('tr',[_c('th',[_vm._v(\"Name\")]),_c('th',[_vm._v(\"Released On\")]),_c('th')])])}]\n\nexport { render, staticRenderFns }","<template>\r\n        <div>\r\n          <button type=\"button\" class=\"btn btn-primary\" @click=\"gotoPage('movieEdit')\">เพิ่มรายการ</button>\r\n          <table class=\"table table-bordered\">\r\n          <thead>\r\n            <tr>\r\n              <th>Name</th>\r\n              <th>Released On</th>\r\n              <th></th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n                <tr v-for=\"p in rows\" :key=\"p.id\">\r\n                  <td>{{p.name}}</td>\r\n                  <td>{{p.released_on}}</td>\r\n                  <td>\r\n                      <input type=\"button\" @click=\"edit(p.id)\" value=\"แก้ไข\" class=\"btn btn-secondary\"/>\r\n                      <input type=\"button\" v-on:click=\"deleteObject(p.id)\" value=\"ลบ\" class=\"btn btn-danger\"/>\r\n                  </td>\r\n                </tr>\r\n          </tbody>\r\n        </table>\r\n            <nav aria-label=\"Page navigation example\">\r\n              <ul class=\"pagination justify-content-center\">\r\n                <li class=\"page-item\">\r\n                  <a class=\"page-link\"  tabindex=\"-1\" aria-disabled=\"true\" v-if=\"page != 1\" @click=\"fetchData(page-1)\">Previous</a>\r\n                </li>\r\n                <template v-for=\"pageNumber in pages.slice(page-1, page+5)\">\r\n                    <li class=\"page-item\" :key=\"pageNumber\">\r\n                        <a class=\"page-link\"  @click=\"fetchData(pageNumber)\">{{pageNumber}}</a>\r\n                    </li>\r\n                </template>\r\n                <li class=\"page-item\" v-if=\"page < pages.length\">\r\n                  <a class=\"page-link\" @click=\"fetchData(page+1)\" >Next</a>\r\n                </li>\r\n              </ul>\r\n            </nav>\r\n        </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from \"axios\";\r\nimport $ from 'jquery';\r\n\r\nexport default {\r\n  name: 'movieList',\r\n  data(){\r\n      return {\r\n        posts : [],\r\n        rows :[],\r\n        page: 1,\r\n        perPage: 10,\r\n        pages: [],\r\n        numberOfPages:0\r\n      };\r\n  },\r\n  methods:{\r\n       fetchData(pageNumber){\r\n          this.showSpinner();\r\n          this.page = pageNumber;\r\n          this.paginate();\r\n          this.hideSpinner();\r\n       },\r\n      setPages () {\r\n        //let numberOfPages = Math.ceil(this.posts.length / this.perPage);\r\n        console.log(\" set Page\"+ this.numberOfPages);\r\n        this.pages=[];\r\n        for (let index = 1; index <= this.numberOfPages; index++) {\r\n            this.pages.push(index);\r\n        }\r\n      },\r\n      paginate () {\r\n        let page = this.page;\r\n        let perPage = this.perPage;\r\n        //let from = (page * perPage) - perPage;\r\n        //let to = (page * perPage);\r\n        //return  this.posts.slice(from, to);\r\n         let self = this;\r\n            axios.get(this.restUrl+\"movies\",{\r\n                params: {\r\n                    pageNo:page,\r\n                    pageSize:perPage\r\n                }\r\n            })\r\n            .then(function (response) {\r\n              console.log(response.data);\r\n              //this.rows=response.data.movies;\r\n              self.rows = response.data.data.movies;\r\n              self.numberOfPages = response.data.pages;\r\n              console.log(response.data.pages);\r\n              //https://stackoverflow.com/questions/45216998/accessing-vue-jss-data-from-axios\r\n              console.log(response.data.data.movies);\r\n              self.setPages();\r\n            })\r\n            .catch(function (error) {\r\n              console.log(error);\r\n            })\r\n            .finally(function () {\r\n              // always executed\r\n            });\r\n      },\r\n      deleteObject(id){\r\n          var ans = confirm(\"delete ?\");\r\n          var self = this;\r\n         if( ans ){\r\n              axios.delete(this.restUrl+\"movies/\"+id,{\r\n\r\n              }).then(function (response) {\r\n                    console.log(response.data);\r\n                    if( response.data.status ==\"success\" )\r\n                      alert(\"delete completed\");\r\n                      //self.$router.push(\"movieList\");\r\n                      self.fetchData(self.page);\r\n                    //console.log(response);\r\n                  })\r\n                  .catch(function (error) {\r\n                    console.log(error);\r\n                  })\r\n                  .finally(function () {\r\n                    // always executed\r\n                  });\r\n            }\r\n      },\r\n      view(){\r\n          // load data\r\n          this.router.push(\"view\");\r\n      },\r\n      edit(id){\r\n            this.$router.push({ path: 'movieEdit', query: { id: id } });\r\n      },\r\n      showSpinner(){\r\n         $('#sprinner').show();\r\n      },\r\n      hideSpinner(){\r\n         $('#sprinner').hide();\r\n      },\r\n\r\n  },\r\n  computed: {\r\n\t\r\n\t},\r\n\twatch: {\r\n\t\t\r\n  },\r\n  created: function() {\r\n    //mock data\r\n    this.fetchData(1);\r\n   },\r\n   filters: {\r\n\t\t\r\n  },\r\n   mounted: function() {\r\n      \r\n  },\r\n}\r\n</script>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./movieList.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./movieList.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./movieList.vue?vue&type=template&id=610f27b0&\"\nimport script from \"./movieList.vue?vue&type=script&lang=js&\"\nexport * from \"./movieList.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}